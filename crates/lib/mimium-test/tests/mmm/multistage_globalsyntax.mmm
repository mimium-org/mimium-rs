#stage(macro)
fn genpower(n:float){
    letrec aux = |n:float,x| {
        if (n>1){
            `{ $x * $(aux(n-1,x)) }
        }else{
            x
        }
    }
    `{|x:float| $(aux(n,`x))}
}
let y = 2
#stage(main)
let x = 3
// you can now write main code as if it is in global level
let power3 = genpower!(3)
fn dsp() {
   power3(2)// should be 8
}

